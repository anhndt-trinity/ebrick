name: ebrick
version: '3.8'

services:
  redis-stack:
    image: redis/redis-stack:latest
    restart: always
    ports:
      - "6379:6379" # Redis server port
      - "8001:8001" # RedisInsight (GUI) port
  postgres:
    image: postgres:latest
    restart: always
    ports:
      - "5432:5432" # PostgreSQL server port
    environment:
      POSTGRES_DB: postgres
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
  nats-ui:
    image: ghcr.io/nats-nui/nui:latest
    container_name: nats-ui
    ports:
      - "31311:31311"

  nats-server:
    image: nats:latest
    container_name: nats-server
    ports:
      - "4222:4222"
      - "6222:6222"
      - "8222:8222"
    volumes:
      - ./nats-server.conf:/etc/nats/nats-server.conf
    command: -c /etc/nats/nats-server.conf
  # tempo:
  #   image: grafana/tempo:2.4.1
  #   command: [ "--target=all", "--storage.trace.backend=local", "--storage.trace.local.path=/var/tempo", "--auth.enabled=false" ]
  #   ports:
  #     - "14250:14250"
  #     - "3200:3200"   # tempo
  #     - "9095:9095" # tempo grpc
  #     - "4317:4317"  # otlp grpc
  #     - "4318:4318"  # otlp http
  #     - "9411:9411"   # zipkin
volumes:
  nats_data:
